!function(){"use strict";const t="undefined"==typeof window;function e(){const t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","rv:1.2.3.4","windows mobile","midp"];let n=!0;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>=0){n=!1;break}return n}function n(){return(()=>{if(t)return!1;const e=t?"":navigator.userAgent.toLowerCase();return e.includes("bitget")||e.includes("bg_app")})()}if(console.log("customer-chat-sdk init...."),!document.querySelector("#customerChatFrame")){let t;const o={lang:"en",domain:"",hiddenButton:!1,accessSite:""};let i=!1;const s=new Set(["asia","en-GB","es-AR","ja","ru","es","it","fr","de","zh-CN","zh-TC","zh-TW","pt","id","pl","vi","uk","pt-PT","es-ES","uz","ar","ph","en"]),a=t=>{const e=window.location.pathname;if(t){const e=document.createElement("a");e.href=t,e.click()}e.indexOf("/download")>-1||e.indexOf("/appdownloads")>-1||"affiliate"===l.accessSite||setTimeout((()=>{const t=e.match(/\/([a-zA-Z-]+)(\/|$)/)?.[1];let n="";t&&(n=s.has(t)?`${t}/`:""),location.href=`${location.origin}/${n}download`}),3e3)},c=()=>{e()||n()?r():a(t)},r=()=>{u.style.zIndex="999998",u.style.visibility="visible",u.contentWindow.postMessage({source:"customerChat",action:"openChat",data:l},"*")},d=()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("data-v-29d5c810",""),t.setAttribute("width","24px"),t.setAttribute("height","24px"),t.setAttribute("color","#fff"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","currentColor"),t.setAttribute("aria-hidden","true");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M6 10H4.253a8.003 8.003 0 0115.496 0H18a2 2 0 00-2 2v4a2 2 0 002 2h1.663A3.504 3.504 0 0117 19.965V20l.908 1.818A5.502 5.502 0 0022 16.5v-.434c.002-.022.002-.044.002-.066v-4c0-5.523-4.477-10-10-10-5.5 0-9.962 4.44-10 9.93L2 12v4a2 2 0 002 2h2.062A2 2 0 008 16v-2L8 13.937V12a2 2 0 00-2-2z"),t.appendChild(n);const o=document.createElement("div");o.id="customer-chat-button",o.style.width="44px",o.style.height="44px",o.style.borderRadius="16px",o.style.position="fixed",o.style.right="24px",o.style.bottom=e()?"24px":"60px",o.style.border="0",o.style.outline="none",o.style.cursor="pointer",o.style.zIndex="10001",o.style.backgroundColor="#03AAC7",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.appendChild(t),h.append(o);let i=!1,s=0,a=0;const r=function(t){(t=t||window.event).preventDefault(),i=!1,s=t.clientX-o.offsetLeft,a=t.clientY-o.offsetTop,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},d=function(t){i=!0,(t=t||window.event).preventDefault();let e=t.clientX-s,n=t.clientY-a;o.style.left=e+"px",o.style.top=n+"px",e<0?e=0:e>window.innerWidth-o.offsetWidth&&(e=window.innerWidth-o.offsetWidth),n<0?n=0:n>window.innerHeight-o.offsetHeight&&(n=window.innerHeight-o.offsetHeight),o.style.left=e+"px",o.style.top=n+"px"},u=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};o.addEventListener("click",(function(){i||c()})),l.needDrag&&o.addEventListener("mousedown",r)},l=Object.assign({},o),h=document.createElement("div");h.id="customerChatEntry";const u=document.createElement("iframe");u.id="customerChatFrame",u.style="position: fixed; right: 0; bottom:0; width: 375px; height: 90%; visibility: hidden; margin-right: 24px; margin-bottom:24px; max-height: 725px; border: none; outline: none; box-shadow: 0px 10px 32px 0px rgba(31, 31, 31, 0.15); border-radius: 16px; background: transparent; z-index: -1;";const m=t=>{const[e,n]=t;if("config"===e)return Object.assign(l,n),!0},p=()=>{if(window.customerChatConfig&&"function"==typeof window.customerChatConfig.readyCallback)try{window.customerChatConfig.readyCallback(!0)}catch(t){console.error("Error in readyCallback:",t)}},w=()=>{u.contentWindow.postMessage({source:"customerChat",action:"updateConfig",data:l},location.origin)};let f=!1;const y=()=>{if(!f){f=!0;let t=new Event("customerChatReady");window.dispatchEvent(t)}};for(window.customerChatChip?Array.isArray(window.customerChatChip)||(console.error("window.customerChatChip is not an array"),window.customerChatChip=[]):window.customerChatChip=[];window.customerChatChip.length;)m(window.customerChatChip.shift());if(window.customerChatChip._nativePush=window.customerChatChip.push,window.customerChatChip.push=function(){const t=Array.from(arguments),[e,n]=t[0]||[];if(n?.open)c();else{if(n?.close)return u.contentWindow.postMessage({source:"customerChat",action:"closeChat",data:l},"*"),u.style.zIndex="-1",void(u.style.visibility="hidden");if(n.hidden)try{document.getElementById("customerChatEntry").style.display="none"}catch{}else if(n.show){u.src||(u.src=l.domain+"/assistant?time="+Date.now());try{document.getElementById("customerChatEntry").style.display="block"}catch{}}else m(...t)?n.position||w():window.customerChatChip._nativePush(...t)}},!n()){let t="/assistant?";"affiliate"===l.accessSite&&(t="/assistant/chat?accessSite=affiliate&"),u.src=`${l.domain}${t}time=${Date.now()}`,u.onload=y}const g=t=>new Promise((e=>{f=!1,u.onload=()=>{y(),e()},u.src=t+(t.includes("?")?"&":"?")+"time="+Date.now()})),C=async(t,e)=>{if("showChat"===t){let t="/assistant/chat?channel=chat";"affiliate"===l.accessSite&&(t="/assistant/chat?accessSite=affiliate&channel=chat"),u.src.includes("/chat")||await g(l.domain+t),e?.show&&setTimeout((()=>{r()}),100)}else"showAllService"===t&&(await g(l.domain+"/assistant/service?action=showAllService"),e?.show&&(setTimeout((()=>{r()}),100),w()));u.contentWindow.postMessage({source:"customerChat",action:t,data:e},"*")};window.customerChatAction=(t,e)=>{C(t,e).catch(console.error)},window.addEventListener("message",(n=>{if("object"==typeof n?.data&&null!==n?.data){const{source:o,appSchema:s,action:a,data:c}=n.data||{};if("customerChat"===o){if("close"===a&&(u.style.zIndex="-1",u.style.visibility="hidden"),"toLogin"===a){const t=c;location.href=`${t}/login?from=${encodeURIComponent(location.pathname)}&source=events`}if("init"===a){if(i)return;t=s,l.hiddenButton||d();const n=e();u.style.width=n?"375px":"100%",u.style.height=n?"90%":"100%",u.style.marginBottom=n?"24px":"0",u.style.marginRight=n?"24px":"0",u.style.maxHeight=n?"725px":"unset",u.style.borderRadius=n?"16px":"0",w(),p(),i=!0}"open"===a&&r()}}}),!1),h.append(u),document.body.append(h)}}();
