import{d as e,a as l,Z as t,r as a,t as o,D as r,$ as s,a0 as i,a1 as n,a2 as u,k as c,j as d,a3 as p,u as v,l as g,K as x,_ as f,m as h,M as m}from"./common.4c529fd4.js";import{o as w,c as b,a as y,r as _,M as k,C as C,d as L,e as j,w as M,u as V,f as D,i as P,k as E,h as U,s as O,n as S,t as T,G as H,F as Z,j as G,L as q}from"./vue.9399bbe7.js";import{n as F,b as R}from"./bit-design.3deb5ba5.js";import{s as $,a as A,l as K,k as N}from"./vendor.6c16fba9.js";import{a as Q,_ as X}from"./vite.444a98db.js";let Me={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ve=[y("path",{d:"M8 9.7257L13.7743 15.5L15.5 13.7743L9.7257 8L15.5 2.22571L13.7743 0.50005L8 6.27436L2.22566 0.5L0.5 2.22566L6.27436 8L0.5 13.7744L2.22566 15.5001L8 9.7257Z",fill:"white"},null,-1)],J={render:function(e,l){return w(),b("svg",Me,Ve)}},Ee={width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Pe=[y("path",{d:"M5.5 1L1.38218 5.94975L5.5 10.8995",stroke:"currentColor","stroke-width":"1.4","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)],W={render:function(e,l){return w(),b("svg",Ee,Pe)}},Oe={width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Te=[y("circle",{cx:"23",cy:"23.0001",r:"22.4",fill:"#414747"},null,-1),y("path",{d:"M16.5469 12.7297L32.8802 23.2297L16.5469 33.7297V12.7297Z",fill:"white"},null,-1)],ee={render:function(e,l){return w(),b("svg",Oe,Te)}},z=e(()=>{let{locale:e}=l(),{cache:c,setCache:d}=t("MICRO_GLOBAL_DIALOG",{response:null,readList:[]}),{visible:p,close:v}=a({...o.GlobalDialog,shouldExecute:e=>[r.LocaleChange,r.ThemeChange,r.UrlChange].includes(e.type),shouldProcess:e=>{var l;return async function(e=!1){if(x.value=!1,g.value=0,e?await b():y(),!f.value.length)return!1;try{return await s(f.value[0].url),!0}catch{return console.error("Failed to load image from server"),!1}}((null==(l=e.triggerEvent)?void 0:l.type)!==r.UrlChange)}}),g=_(0),x=_(!1),f=k([]),h=C({});function m(){x.value=!1,g.value=0,c.value.readList=c.value.readList.concat(f.value.map(e=>({id:e.id,time:Date.now()}))),d(c.value),v()}function w(l){let t=Date.now(),{query:a}=A.parseUrl(location.href);return l.filter(e=>!!("1"!==e.type||e.url&&e.h5Url)&&!("2"===e.type&&!e.videoUrl)).filter(l=>{var t,o;return!!u||null==l.triggerPage||""===l.triggerPage||((null!=(t=l.triggerPageList)&&t.length?l.triggerPageList:null==(o=l.triggerPage)?void 0:o.split(","))||[]).some(l=>(l=>{let t=new URL(l.match(/^(https?:)/)?l:location.origin+(l.startsWith("/")?l:"/"+l));if(t.origin!==location.origin)return!1;let o=RegExp(`^/${e.value}|/$`,"g");if(t.pathname.replace(o,"")!==location.pathname.replace(o,""))return!1;let{query:r}=A.parseUrl(t.href);for(let[e,l]of Object.entries(r))if(a[e]!==l)return!1;return!0})(l))}).filter(e=>"1"!==e.triggerType||c.value.readList.every(l=>l.id!==e.id)).filter(e=>{if("2"!==e.triggerType)return!0;let l=K(+e.triggerStartTime).startOf("day").toDate().getTime(),a=K(+e.triggerEndTime).endOf("day").toDate().getTime(),o=!1;for(;l<a;l+=864e5*+e.triggerFrequency||1){let a=l+864e5;if(l>+e.triggerEndTime)break;if(l<t&&t<a&&!c.value.readList.some(({id:t,time:o})=>e.id===t&&l<o&&o<a)){o=!0;break}}return o})}async function b(){var e;let l=c.value.response,{data:t,code:a}=await i((null==l?void 0:l.md5Value)||"")||{};"200"===a&&((null==l?void 0:l.md5Value)!==t.md5Value?(c.value.response=t,d(c.value)):null!=(e=t.platformPops)&&e.length||(t=l),n(h,t),y())}let y=()=>{let e=w(h.actPops||[]).slice(0,1),l=w(h.platformPops||[]).slice(0,e.length?2:3);f.value=e.concat(l)};return{index:g,visible:p,videoVisible:x,dialogConfigList:f,close:v,handleClose:m,onCoverClick:function(e){"2"!==e.type?e.jumpUrl&&(m(),$(e.jumpUrl)):x.value=!0},fetchDialogConfig:b}}),B=e(()=>({trackDialogExpose(e){c({event_tracking:"bg_web_exchange_all:popups_exposure",event_tracking_id:"b3307",business1:"base",business2:"/",event_tracking_ext:{pop_id:e}})},trackDialogClick(e,l){d({event_tracking:"bg_web_exchange_all:popups_click",event_tracking_id:"b3308",business1:"base",business2:"/",timely:1,event_tracking_ext:{pop_id:e,click_type:l}})}})),Ue={width:"28",height:"27",viewBox:"0 0 28 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Se=[y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.725 3.1249C2.725 2.90399 2.90409 2.7249 3.125 2.7249H19.625C19.8459 2.7249 20.025 2.90399 20.025 3.1249V24.1249C20.025 24.3454 19.8466 24.5242 19.6262 24.5249L19.625 24.5249H2.725V3.1249ZM19.625 26.7249H2.31071C1.32449 26.7249 0.525 25.9254 0.525 24.9392V3.1249C0.525 1.68896 1.68906 0.524902 3.125 0.524902H19.625C21.0609 0.524902 22.225 1.68896 22.225 3.1249V12.5249H24.875C26.3109 12.5249 27.475 13.689 27.475 15.1249V24.1249C27.475 25.5608 26.3109 26.7249 24.875 26.7249H19.625ZM22.225 14.7249V24.1249C22.225 24.2609 22.2146 24.3945 22.1944 24.5249H24.875C25.0959 24.5249 25.275 24.3458 25.275 24.1249V15.1249C25.275 14.904 25.0959 14.7249 24.875 14.7249H22.225ZM17 7.2249H5V5.0249H17V7.2249ZM5 11.7249H11V9.5249H5V11.7249Z",fill:"#0D0E0E"},null,-1)],He={render:function(e,l){return w(),b("svg",Ue,Se)}},I=L({__name:"JumpBtn",props:{dialog:{}},setup(e){let{t:t}=l(),{close:a}=z(),{trackDialogClick:o}=B();return(l,r)=>(w(),j(V(F),{"popper-class":"micro-global-dialog-popper","append-to":"body",placement:"bottom",content:V(t)("common_global_dialog.more")},{default:M(()=>[y("div",{class:"absolute right-40px bottom-144px flex items-center justify-center w-64px h-64px bg-white rounded-50% cursor-pointer lt-lg:right:24px lt-lg:bottom-40px lt-lg:w-48px lt-lg:h-48px",style:{"box-shadow":"0px 7px 22px rgba(146, 160, 171, 0.28)"},onClick:r[0]||(r[0]=l=>(o(e.dialog.id,"others"),a(),void $(e.dialog.jumpUrl)))},[D(V(He),{class:"lt-lg:w-22px"})])]),_:1},8,["content"]))}}),sl=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"})),Ze={key:0,class:"micro-global-dialog"},ze={key:1,class:"inline-flex items-center py-6px mt-24px bg-dsColorLayerOne rounded-54px text-primaryText"},Be={class:"text-12px"},Ie={class:"relative"},Ge=["src"],le=Q(L({__name:"Desktop",setup(e){let{index:l,visible:t,videoVisible:a,dialogConfigList:o,close:r,handleClose:s,onCoverClick:i}=z(),{trackDialogClick:n,trackDialogExpose:u}=B(),c=_(!1),d=P(()=>{var e;return null==(e=o.value)?void 0:e[l.value]});function v(){l.value<o.value.length-1&&l.value++}function g(){l.value>0&&l.value--}return E(t,()=>{t.value&&o.value.forEach(e=>{u(e.id)})},{immediate:!0}),(e,r)=>{var u;return V(t)?(w(),b("div",Ze,[V(a)?null!=(u=d.value)&&u.videoUrl?(w(),j(V(R),{key:1,class:"video-dialog","model-value":V(a),"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,onClose:r[4]||(r[4]=e=>V(s)())},{default:M(()=>[y("div",Ie,[y("video",{class:"w-1200px max-w-1200px max-h-80vh lt-2xl:max-w-85vw",preload:"auto",autoplay:"",controls:"","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-ignore-metadata":"true",src:V(N)(d.value.videoUrl||"")},null,8,Ge),y("div",{class:"absolute -top-48px -right-48px flex items-center justify-center w-32px h-32px cursor-pointer",onClick:r[3]||(r[3]=e=>V(s)())},[D(V(J))]),d.value.jumpUrl?(w(),j(I,{key:0,dialog:d.value},null,8,["dialog"])):U("",!0)])]),_:1},8,["model-value"])):U("",!0):(w(),j(V(R),{key:0,"model-value":V(t),"close-on-click-modal":!c.value,"close-on-press-escape":!1,"show-close":!1,modal:c.value,"destroy-on-close":"",width:"380px",onClose:V(s)},{default:M(()=>[d.value?(w(),b("div",{key:0,class:"relative cursor-pointer mt-32px",onClick:r[2]||(r[2]=e=>(V(n)(d.value.id,"others"),V(i)(d.value)))},[D(p,{class:"rounded-8px w-full",src:V(N)(d.value.url||""),alt:"cover",onLoad:r[0]||(r[0]=e=>{c.value=!0})},null,8,["src"]),"2"===d.value.type&&c.value?(w(),j(V(ee),{key:0,class:"absolute top-50% left-50% -translate-50%"})):U("",!0),c.value?(w(),b("div",{key:1,class:"absolute -top-48px -right-48px flex items-center justify-center w-32px h-32px cursor-pointer",onClick:r[1]||(r[1]=O(e=>(V(n)(d.value.id,"close"),V(s)()),["stop"]))},[D(V(J))])):U("",!0)])):U("",!0),V(o).length>1&&c.value?(w(),b("div",ze,[y("div",{class:"pr-16px pl-12px cursor-pointer",onClick:g},[D(V(W),{class:S(["arrow-prev",{"text-disabledText":0===V(l)}])},null,8,["class"])]),y("div",Be,T(V(l)+1)+" / "+T(V(o).length),1),y("div",{class:"pl-16px pr-12px cursor-pointer",onClick:v},[D(V(W),{class:S(["arrow-next rotate-y-180",{"text-disabledText":V(l)===V(o).length-1}])},null,8,["class"])])])):U("",!0)]),_:1},8,["model-value","close-on-click-modal","modal","onClose"]))])):U("",!0)}}}),[["__scopeId","data-v-7c535312"]]),nl=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),Re={width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qe=[y("path",{d:"M6.4581 0.260941C6.81083 -0.0869804 7.38272 -0.0869804 7.73545 0.260941C8.06743 0.588397 8.08696 1.10734 7.79404 1.45732L7.73545 1.52088L2.18068 7.00008L7.73545 12.4791C8.06743 12.8066 8.08696 13.3255 7.79404 13.6755L7.73545 13.7391C7.40347 14.0665 6.87735 14.0858 6.52253 13.7968L6.4581 13.7391L0.264549 7.62997C-0.067434 7.30251 -0.0869624 6.78357 0.205964 6.43359L0.264549 6.37003L6.4581 0.260941Z",fill:"var(--color-secondary-text)"},null,-1)],Ae={render:function(e,l){return w(),b("svg",Re,qe)}},Fe={width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$e=[y("path",{d:"M11.0955 12.2406L7.09591 8.16718L8.40369 6.83524L12.4017 10.9071L16.4112 6.81401L17.7205 8.14441L13.7095 12.2391L17.5461 16.1466L16.2383 17.4785L12.4033 13.5726L8.58879 17.4667L7.27946 16.1363L11.0955 12.2406Z",fill:"white"},null,-1),y("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.4999 23.6667C18.9432 23.6667 24.1666 18.4434 24.1666 12C24.1666 5.55672 18.9432 0.333374 12.4999 0.333374C6.0566 0.333374 0.833252 5.55672 0.833252 12C0.833252 18.4434 6.0566 23.6667 12.4999 23.6667ZM12.4999 21.8C17.9123 21.8 22.2999 17.4124 22.2999 12C22.2999 6.58765 17.9123 2.20004 12.4999 2.20004C7.08753 2.20004 2.69992 6.58765 2.69992 12C2.69992 17.4124 7.08753 21.8 12.4999 21.8Z",fill:"white"},null,-1)],Je={render:function(e,l){return w(),b("svg",Fe,$e)}},We={key:0},Ke={class:"relative z-1"},Ne={key:0,class:"absolute z-0 top-0 left-0 w-100vw h-100vh bg-black bg-opacity-60"},Qe={key:1,class:"box-border fixed top-65px flex flex-col items-center justify-center left-0 px-24px bg-bg w-full h-[calc(100vh-65px)] lt-md:px-16px"},Xe={class:"absolute top-40px left-16px flex items-center justify-center w-40px h-40px w-40px h-40px rounded-50% hover:bg-bgSecondary cursor-pointer lt-md:top-16px"},Ye=["src"],te=L({__name:"Mobile",setup(e){let l=H(async()=>(await X(()=>import("./swiper.61585180.js").then(e=>e.s),["assets/swiper.61585180.js","assets/vendor.6c16fba9.js","assets/vue.9399bbe7.js","assets/__commonjsHelpers__.7619f2af.js"])).Swiper),t=H(async()=>(await X(()=>import("./swiper.61585180.js").then(e=>e.s),["assets/swiper.61585180.js","assets/vendor.6c16fba9.js","assets/vue.9399bbe7.js","assets/__commonjsHelpers__.7619f2af.js"])).SwiperSlide),{index:a,visible:o,videoVisible:r,dialogConfigList:s,handleClose:i,close:n,onCoverClick:u}=z(),{trackDialogClick:c,trackDialogExpose:d}=B(),v=P(()=>{var e;return null==(e=s.value)?void 0:e[a.value]}),g=_(!1);function x({activeIndex:e}){a.value=e}function f(){g.value||n()}return E(o,()=>{o.value&&s.value.forEach(e=>{d(e.id)})},{immediate:!0}),(e,n)=>V(o)?(w(),b("div",We,[V(r)?(w(),b("div",Qe,[y("div",Xe,[D(V(Ae),{onClick:n[1]||(n[1]=e=>(V(c)(v.value.id,"close"),V(i)()))})]),y("video",{class:"w-full max-h-60vh",preload:"auto",autoplay:"",controls:"","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-ignore-metadata":"true",src:V(N)(v.value.videoUrl||"")},null,8,Ye),v.value.jumpUrl?(w(),j(I,{key:0,dialog:v.value},null,8,["dialog"])):U("",!0)])):(w(),b("div",{key:0,class:"fixed top-0 left-0 flex flex-col items-center justify-center w-100vw h-100vh text-center",onClick:f},[y("div",Ke,[D(V(l),{slidesPerView:"auto",centeredSlides:"",onSlideChange:x},{default:M(()=>[(w(!0),b(Z,null,G(V(s),(e,l)=>(w(),j(V(t),{class:"flex items-center relative cursor-pointer w-400px max-w-74vw max-h-80vh transition-all",onClick:l=>(V(c)(e.id,"others"),V(u)(e))},{default:M(()=>[D(p,{class:S(["w-inherit max-w-inherit max-h-inherit object-contain duration-400",l!==V(a)?"scale-80 opacity-60":""]),src:V(N)(e.h5Url||""),onLoad:e=>{0===l&&(g.value=!0)}},null,8,["class","src","onLoad"]),"2"===e.type?(w(),j(V(ee),{key:0,class:"absolute top-50% left-50% -translate-50%"})):U("",!0)]),_:2},1032,["onClick"]))),256))]),_:1}),g.value?(w(),j(V(Je),{key:0,class:"mt-24px",onClick:n[0]||(n[0]=e=>(V(c)(v.value.id,"close"),V(i)()))})):U("",!0)]),g.value?(w(),b("div",Ne)):U("",!0)]))])):U("",!0)}}),cl=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"})),el=e(e=>{let{rootProps:l,event:t,rootExport:a}=v(e,"GlobalDialog");return{rootProps:l,event:t,rootExport:a}}),ll=L({__name:"GlobalDialog",props:{url:{},zIndex:{default:99999},locale:{},theme:{},logger:{type:Boolean},logEvent:{},gtag:{},twq:{}},setup(e,{expose:l}){g();let{winWidth:t}=x(),{rootProps:a,rootExport:o}=el(e);return l(o),(e,l)=>(w(),j(f,null,{default:M(()=>[V(h)?(w(),j(m,{key:0},{default:M(()=>[y("div",{class:"relative",style:q({zIndex:V(a).zIndex})},[V(t)>=1024?(w(),j(le,{key:0,class:"lt-lg:hidden"})):(w(),j(te,{key:1,class:"lg:hidden"}))],4)]),_:1})):U("",!0)]),_:1}))}}),ul=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"}));export{nl as D,ul as G,sl as J,cl as M};