import{b as e,B as t,c as o}from"./bit-design.3deb5ba5.js";import{d as a,u as l,k as n,j as s,l as i,n as r,p as u,q as c,r as d,t as p,D as g,_ as v,M as m,R as _,v as b}from"./common.4c529fd4.js";import{d as f,r as k,i as y,e as h,w as x,o as C,f as j,u as w,a as I,c as L,j as E,n as N,g as A,t as D,F as P}from"./vue.9399bbe7.js";import{s as T}from"./vendor.6c16fba9.js";import"./lodash.5e8ecc56.js";import"./Header.9051380b.js";import"./AppDownloadBar.bcf2194c.js";import"./vite.444a98db.js";import"./Footer.ee7ebc9c.js";import"./Search.6db64127.js";import"./RecommendCoins.17327c95.js";import"./swiper.61585180.js";import"./GlobalDialog.802390c6.js";import"./axios.1977eed3.js";import"./__commonjsHelpers__.7619f2af.js";let ce=a(e=>{let{rootProps:t,event:o,rootExport:a}=l(e,"ComplianceAuth");return{rootProps:t,event:o,rootExport:a}}),re=a(()=>({trackNotLoggedIdentityExpose(e){n({event_tracking:"bg_web_exchange_Notlogged:identity_popup_exposure",event_tracking_id:"b12359",business1:"base",business2:null,event_tracking_ext:{country:e}})},trackNotLoggedIdentityLeftClick(e){s({event_tracking:"bg_web_exchange_Notlogged:identity_left_click",event_tracking_id:"b12360",business1:"base",business2:null,timely:1,event_tracking_ext:{country:e}})},trackNotLoggedIdentityRightClick(e){s({event_tracking:"bg_web_exchange_Notlogged:identity_right_click",event_tracking_id:"b12361",business1:"base",business2:null,timely:1,event_tracking_ext:{country:e}})},trackLoggedIdentityExpose(e){n({event_tracking:"bg_web_exchange_logged:identity_exposure",event_tracking_id:"b12362",business1:"base",business2:null,event_tracking_ext:{country:e}})}})),ue={class:"whitespace-pre-line"},pe={class:"flex gap-12px lt-md:flex-col"},Ee=f({__name:"ComplianceAuth",props:{locale:{},theme:{},logger:{type:Boolean},logEvent:{},gtag:{},twq:{}},setup(a,{expose:l}){i();let{rootProps:n,rootExport:s}=ce(a),{config:f}=r(),{complianceProcess:R,waitProcess:U}=u(),{complianceSettingsData:B}=c(),H=re(),S=k(!1),V=k(!1),q=y(()=>B.find(e=>e.regulatoryDimension===_.USER_COMPLIANCE_AUTH)),F=y(()=>{var e,t,o;return(null==(o=null==(t=null==(e=q.value)?void 0:e.languageInfo)?void 0:t.popup)?void 0:o.buttonList)||[]}),{visible:M,close:z}=d({...p.ComplianceAuth,shouldExecute:e=>e.type===g.UrlChange,shouldProcess:async()=>(await U(),!!q.value&&(R.hasLogin?(H.trackLoggedIdentityExpose(q.value.countryCode||""),!0):(!f.complianceAuth.ipConfirmCloseTime||Date.now()-f.complianceAuth.ipConfirmCloseTime>7776e6)&&(H.trackNotLoggedIdentityExpose(q.value.countryCode||""),!0)))});return l(s),(a,l)=>(C(),h(v,null,{default:x(()=>[j(m,{theme:w(n).theme},{default:x(()=>{var a,n,s;return[j(w(e),{"model-value":w(M),"align-center":"",left:"",title:null==(s=null==(n=null==(a=q.value)?void 0:a.languageInfo)?void 0:n.popup)?void 0:s.popupTitle,width:480,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,onClose:w(z)},{footer:x(()=>[I("div",pe,[(C(!0),L(P,null,E(F.value,(e,o)=>(C(),h(w(t),{key:o,class:N(["w-full",{"ms-0 ml-0":o>0}]),round:"",size:"medium",type:o===F.value.length-1?"main":void 0,disabled:!S.value,loading:V.value,onClick:t=>w(R).hasLogin?(async()=>{var e;V.value=!0;try{let t=null==(e=q.value)?void 0:e.configId;t&&await b({configId:t}),z()}finally{V.value=!1}})():(async(e,t)=>{var o;let a=(null==(o=q.value)?void 0:o.countryCode)||"";0===e?H.trackNotLoggedIdentityLeftClick(a):1===e&&H.trackNotLoggedIdentityRightClick(a),f.complianceAuth.ipConfirmCloseTime=Date.now(),z(),t&&T(t)})(o,e.link)},{default:x(()=>[A(D(e.text),1)]),_:2},1032,["class","type","disabled","loading","onClick"]))),128))])]),default:x(()=>{var e,t,a;return[I("div",ue,D(null==(a=null==(t=null==(e=q.value)?void 0:e.languageInfo)?void 0:t.popup)?void 0:a.popupText),1),j(w(o),{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),class:N(w(R).hasLogin?"mt-24px":"mt-12px")},{default:x(()=>{var e,t,o;return[A(D(null==(o=null==(t=null==(e=q.value)?void 0:e.languageInfo)?void 0:t.popup)?void 0:o.checkbox),1)]}),_:1},8,["modelValue","class"])]}),_:1},8,["model-value","title","onClose"])]}),_:1},8,["theme"])]),_:1}))}});export{Ee as default};