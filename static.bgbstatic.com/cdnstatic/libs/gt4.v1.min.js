!function(f){if(void 0===f)throw new Error("Geetest requires browser environment");var i=f.document,n=f.Math,a=i.getElementsByTagName("head")[0],c=1e4,t=f.location.host;function s(t){this._obj=t}s.prototype={_each:function(t){var e,r=this._obj;for(e in r)r.hasOwnProperty(e)&&t(e,r[e]);return this},_extend:function(t){var r=this;new s(t)._each(function(t,e){r._obj[t]=e})}};function r(t){var r=this;new s(t)._each(function(t,e){r[t]=e})}r.prototype={apiServers:[t+"/v1/geetest"],staticServers:["static.geetest.com","static.geevisit.com"],protocol:"http://",typePath:"/load",fallback_config:{bypass:{staticServers:[""],type:"bypass",bypass:"/cdnstatic/libs/new-bypass.v1.min.js"}},_get_fallback_config:function(){return l(this.type)?this.fallback_config[this.type]:this.fallback_config.bypass},_extend:function(t){var r=this;new s(t)._each(function(t,e){r[t]=e})}};function p(){return parseInt(1e4*n.random())+(new Date).valueOf()}function g(e,r){var o;if("function"==typeof e)return o=Array.prototype.slice.call(arguments,2),Function.prototype.bind?e.bind(r,o):function(){var t=Array.prototype.slice.call(arguments);return e.apply(r,o.concat(t))}}var o=function(t){return"number"==typeof t},l=function(t){return"string"==typeof t},u=function(t){return"boolean"==typeof t},d=/Mobi/i.test(navigator.userAgent),y={},h={},v=Object.prototype.toString;function x(t,e){if(t!==Object(t)||"[object Date]"==v.call(t)||"[object RegExp]"==v.call(t)||"[object Boolean]"==v.call(t)||"function"==typeof t)return e?t.replace(/(\S)(_([a-zA-Z]))/g,function(t,e,r,o){return e+o.toUpperCase()||""}):t;if("[object Array]"==v.call(t))for(var r=[],o=0;o<t.length;o++)r.push(x(t[o]));else{var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[x(n,!0)]=x(t[n]))}return r}function b(t,e,r){var o=i.createElement("script"),n=(o.charset="UTF-8",o.async=!0,/static\.geetest\.com/g.test(t)&&(o.crossOrigin="anonymous"),!(o.onerror=function(){e(!0),n=!0}));o.onload=o.onreadystatechange=function(){n||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(n=!0,setTimeout(function(){e(!1)},0))},o.src=t,a.appendChild(o),setTimeout(function(){n||(o.onerror=o.onload=null,o.remove&&o.remove(),e(!0))},r||c)}function m(t,e,r,o){return e=k(e),r=S(r)+j(o),r=e?t+e+r:r}function w(t,e,r,o){E(r,r.protocol,t,e,{callback:"",captcha_id:r.captchaId,challenge:r.challenge||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*n.random()|0;return("x"===t?e:3&e|8).toString(16)}),client_type:d?"h5":"web",risk_type:r.riskType,user_info:r.userInfo,call_type:r.callType,lang:r.language||("Netscape"===navigator.appName?navigator.language:navigator.userLanguage).toLowerCase()},function(t){t&&"function"==typeof r.offlineCb?r.offlineCb():t&&o(r._get_fallback_config())},function(t,e){"success"==e.status?o(e.data):(e.status,o(e)),f[t]=void 0;try{delete f[t]}catch(t){}})}function _(t,e,r){if("function"!=typeof e.onError)throw new Error({networkError:"Network Error",gtTypeError:"gt field is not of type string"}[t]);e.onError({desc:r.desc,msg:r.msg,code:r.code})}var k=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},S=function(t){return t=0!==(t=t&&t.replace(/\/+/g,"/")).indexOf("/")?"/"+t:t},j=function(t){var r;return t?(r="?",new s(t)._each(function(t,e){(l(e)||o(e)||u(e))&&(r=r+encodeURIComponent(t)+"="+encodeURIComponent(e)+"&")}),(r="?"===r?"":r).replace(/&$/,"")):""},E=function(o,n,a,c,i,s,l){function u(e){l&&(r="geetest_"+p(),f[r]=g(l,null,r),i.callback=r);var r,t=m(n,a[e],c,i);b(t,function(t){if(t){if(r)try{f[r]=function(){f[r]=null}}catch(t){}e>=a.length-1?s(!0):u(e+1)}else s(!1)},o.timeout)}u(0)};(f.Geetest||i.getElementById("gt_lib"))&&(h.slide="loaded");f.initGeetest4=function(t,o){var e,c=new r(t);t.https?c.protocol="https://":t.protocol||(c.protocol=f.location.protocol+"//"),"object"==typeof(e=t.getType)&&null!==e&&c._extend(t.getType),w(c.apiServers,c.typePath,c,function(t){if("error"===(t=x(t)).status)return _("networkError",c,t);function e(){c._extend(t),o(new f.Geetest4(c))}var a=t.type,r=(c.debug&&new s(t)._extend(c.debug),y[a]=y[a]||[],h[a]||"init");"init"===r?(h[a]="loading",y[a].push(e),t.gctPath&&E(c,c.protocol,!Object.hasOwnProperty.call(c,"staticServers")&&t.staticServers||c.staticServers,t.gctPath,null,function(t){t&&_("networkError",c,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}})}),E(c,c.protocol,!Object.hasOwnProperty.call(c,"staticServers")&&t.staticServers||c.staticServers,t.bypass||t.staticPath+t.js,null,function(t){if(t)h[a]="fail",_("networkError",c,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}});else{h[a]="loaded";for(var e=y[a],r=0,o=e.length;r<o;r+=1){var n=e[r];"function"==typeof n&&n()}y[a]=[],h[a]="init"}})):"loaded"===r?(t.gctPath&&!function(t){var e=!1,r=t&&{js:"script",css:"link"}[t.split(".").pop()];if(void 0!==r){var o,n=i.getElementsByTagName(r);for(o in n)(n[o].href&&0<n[o].href.toString().indexOf(t)||n[o].src&&0<n[o].src.toString().indexOf(t))&&(e=!0)}return e}(t.gctPath)&&E(c,c.protocol,!Object.hasOwnProperty.call(c,"staticServers")&&t.staticServers||c.staticServers,t.gctPath,null,function(t){t&&_("networkError",c,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}})}),e()):"fail"===r?_("networkError",c,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}}):"loading"===r&&y[a].push(e)})}}(window);